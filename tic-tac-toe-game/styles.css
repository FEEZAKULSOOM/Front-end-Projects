// JavaScript for Tic Tac Toe animations

document.addEventListener('DOMContentLoaded', function() {
    const resetBtn = document.getElementById('reset-btn');
    const newBtn = document.getElementById('new-btn');
    const boxes = document.querySelectorAll('.box');
    const msgContainer = document.querySelector('.msg-container');
    const msg = document.getElementById('msg');
    const body = document.body;
    
    // Button click animation
    resetBtn.addEventListener('click', function() {
        this.style.animation = 'buttonClick 0.3s ease';
        setTimeout(() => {
            this.style.animation = '';
        }, 300);
    });
    
    newBtn.addEventListener('click', function() {
        this.style.animation = 'buttonClick 0.3s ease';
        setTimeout(() => {
            this.style.animation = '';
        }, 300);
    });
    
    // Box click animation
    boxes.forEach(box => {
        box.addEventListener('click', function() {
            this.style.animation = 'buttonClick 0.3s ease';
            setTimeout(() => {
                this.style.animation = '';
            }, 300);
        });
    });
    
    // Function to show winner (call this when game ends)
    function showWinner(winner) {
        // Hide game container
        body.classList.add('winner-show');
        
        // Show winner message
        msgContainer.classList.remove('hide');
        msg.textContent = `Congratulations! Winner is ${winner}`;
        
        // Create confetti effect
        createConfetti();
        
        // Add celebration sound (optional)
        playWinSound();
    }
    
    // Function to create confetti
    function createConfetti() {
        for(let i = 0; i < 100; i++) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.animation = `confettiFall ${Math.random() * 3 + 2}s linear forwards`;
            confetti.style.opacity = Math.random() * 0.7 + 0.3;
            confetti.style.width = Math.random() * 10 + 5 + 'px';
            confetti.style.height = Math.random() * 10 + 5 + 'px';
            confetti.style.backgroundColor = getRandomColor();
            document.body.appendChild(confetti);
            
            // Remove confetti after animation
            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }
    }
    
    function getRandomColor() {
        const colors = ['#ff6b6b', '#ffd166', '#06d6a0', '#118ab2', '#ef476f', '#7209b7'];
        return colors[Math.floor(Math.random() * colors.length)];
    }
    
    function playWinSound() {
        // Optional: Add win sound
        // const winSound = new Audio('win-sound.mp3');
        // winSound.play();
    }
    
    // Function to reset game
    function resetGame() {
        body.classList.remove('winner-show');
        msgContainer.classList.add('hide');
        
        // Clear all confetti
        document.querySelectorAll('.confetti').forEach(c => c.remove());
    }
    
    // Add these functions to your existing game logic
    window.showWinner = showWinner;
    window.resetGame = resetGame;
    
    // Example: When someone wins, call showWinner('X') or showWinner('O')
    // When new game is clicked, call resetGame()
});
